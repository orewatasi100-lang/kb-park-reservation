<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8"/>
  <!-- ã‚¹ãƒãƒ›å…¨é¢æœ€é©åŒ–ï¼ˆå…¨å¹…ï¼‰ -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
  <title>ãƒ›ãƒƒãƒ”ãƒ³ãƒãƒƒã‚·ãƒ¥ç¦å±±åº— äºˆç´„</title>
<style>
:root{
  --brand:#E60012;
  --ink:#111315;
  --muted:#62676C;
  --line:#D5D9DD;
  --bg:#FFFFFF;
  --sel-bg:#fde6e6; /* æ™‚é–“é¸æŠã®è–„ã„èµ¤ */
  --focus:#b0b7bf; /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç·š */
  --error:#e53935; /* ã‚¨ãƒ©ãƒ¼ãƒãƒŠãƒ¼ */
}

/* ========== Reset / Base ========== */
*{box-sizing:border-box}
html,body{height:100%; -webkit-text-size-adjust:100%;}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Noto Sans JP",Meiryo,sans-serif;
  font-size:clamp(30px, 6.0vw + 0.2rem, 40px);
  color:var(--ink);
  background:var(--bg);
  padding-top:env(safe-area-inset-top,0);
  padding-bottom:env(safe-area-inset-bottom,0);
  line-height:1.35;
}

/* ========== èƒŒæ™¯ãƒ­ã‚´ ========== */
.bg-logo{
  position:fixed; inset:0; z-index:-2;
  background-image:url("https://msp.c.yimg.jp/images/v2/FUTi93tXq405grZVGgDqG40yntl66Vd8f8A8GdNaSPNHWO-P2_c_V2IK2-hpt0qa8NpDbcpdjVjW6sjFkzU7M44H_dlad3LgBfrYR5Htin-iBe9LmvH8TtY4tuCC-Tcu-rYwQSUXycB-p2iBsqZdBaWHMlXRAs-jtx4HHo5npKOdjTPwF4fhcWRP5oZJEgTIgPvDecurUbz5xLxCrHZJ2qqeJlCcdB45iKaojAflNv1TAr0dFMmuz96UfXzfL-Guc0HQYbG-PHdtdVLPTzbfV0TWjuRgo6N-GzO8TV7FXADuj-bNxtbvZHSIu3oHMhpWVGrUPufDOGrRknWCXSlBfyVlQAOuydEcPFkln-G0GI2ilid3UFCd-FWgNcUGY_PDBlLJpQ5C7aPRiYU2r2WBJA==/h9xMJkD_9Itg3P4SOxwl718LCUU3avnPef2ZjSSdmEGOL4FxLAPbXizVCxq3FcASFy3-_NkBWTks900-c-k-c0x00ffffff-no-rj?errorImage=false");
  background-repeat:no-repeat; background-position:center 20%; background-size: 100% auto; opacity:0.26;
}
.bg-logo::after{
  content:""; position:absolute; inset:0; z-index:-1;
  background:radial-gradient(ellipse at top, rgba(255,255,255,.45), rgba(255,255,255,.65));
}

/* ========== ãƒ˜ãƒƒãƒ€ ========== */
.hd{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);padding:12px 12px;z-index:10}
.titleLogo{display:flex;flex-direction:column;align-items:center;gap:8px}
.titleLogo img{height:86px;object-fit:contain}
.subtitle{font-size:clamp(28px,6.5vw,38px);font-weight:900;color:#e65100}

/* ========== ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ========== */
.container.fullbleed{max-width:none;margin:0;padding:0}
.card.edge{border-radius:0; margin:0 0 16px 0;}
.container{max-width:960px;margin:0 auto;padding:0 12px}
.card{background:#fff;border:1px solid var(--line);padding:18px;box-shadow:0 1px 2px rgba(0,0,0,.03)}
h2{font-size:clamp(32px, 6.8vw, 44px);margin:0 0 14px}

/* ========== ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ ========== */
.weekday-head{
  display:grid;
  grid-template-columns:repeat(7,minmax(0,1fr)); /* â˜… minmax(0,1fr)ã§ã¯ã¿å‡ºã—é˜²æ­¢ */
  gap:8px;
  margin:4px 0 12px;
  width:100%;
  max-width:100%;
  overflow:hidden; /* â˜… å¿µã®ãŸã‚ */
}
.weekday-head > div{text-align:center;color:var(--muted);font-size:clamp(22px,4.6vw,28px)}
.weekday-head .sun{color:#d32f2f}
.weekday-head .sat{color:#1976d2}

/* ã‚«ãƒ¼ãƒ‰å¹…ã«ãƒ•ã‚£ãƒƒãƒˆã•ã›ã‚‹ï¼ˆå…¨å¹…ï¼‰ */
.calendar{
  display:grid;
  grid-template-columns:repeat(7,minmax(0,1fr)); /* â˜… ã“ã“ã‚‚minmax(0,1fr) */
  gap:8px;
  width:100%;
  max-width:100%;
  margin:0 auto;
  overflow:hidden; /* â˜… å¿µã®ãŸã‚ */
}
.day,.slot{
  padding:18px;border:1px solid var(--line);border-radius:14px;text-align:center;background:#fff;
  transition:transform .05s ease, box-shadow .05s ease, background .1s ease;
}
.day.full,.day.block,.slot.full,.slot.cutoff{opacity:.4;pointer-events:none}
/* æ—¥ä»˜ï¼ˆä¸Šæ®µï¼‰ã¨æ›œæ—¥ï¼ˆä¸‹æ®µï¼‰ */
.day > div:first-child{ font-size:clamp(20px,4.5vw,30px); font-weight:900; }
.day .dow{font-size:clamp(22px,4.6vw,28px)}
.day.sun{color:#d32f2f}
.day.sat{color:#1976d2}

/* æ™‚é–“ãƒœã‚¿ãƒ³ã®æ™‚é–“è¡¨ç¤ºã‚’å¤§ãã */
.slot > div:first-child{ font-size: clamp(34px, 7.4vw, 48px); font-weight: 900; }
.slot .remain{font-size:clamp(22px,4.6vw,28px);color:var(--muted)}
.slot.selected{background:var(--sel-bg); border-color:#f3c7c7}

/* ========== ã‚¹ãƒ­ãƒƒãƒˆã‚°ãƒªãƒƒãƒ‰ï¼‹ãƒ•ã‚£ãƒ«ã‚¿ ========== */
.slots{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.slot-filters{display:flex;gap:8px;margin:6px 0 12px}
.chip{appearance:none;border:2px solid var(--line);background:#fff;border-radius:999px;padding:8px 14px;font-size:clamp(22px,4.6vw,28px)}
.chip-on{border-color:#000}

/* ========== ãƒœã‚¿ãƒ³ ========== */
.btn{appearance:none;border:none;background:var(--brand);color:#fff;padding:16px 20px;border-radius:999px;font-size:clamp(28px,6.8vw,38px);font-weight:900;transition:transform .05s ease, box-shadow .05s ease}
.btn-outline{appearance:none;border:2px solid var(--ink);background:#fff;color:#000;padding:14px 18px;border-radius:999px;font-size:clamp(26px,6.2vw,34px)}
.small{font-size:clamp(22px,5.2vw,28px);padding:10px 14px}
.tiny{font-size:clamp(18px,4.2vw,22px);padding:8px 12px}
.press:active,.day:active,.slot:active{transform:translateY(2px); box-shadow: inset 0 2px 3px rgba(0,0,0,.2)}

/* ========== å…¥åŠ› ========== */
input,textarea{
  padding:16px;border:2px solid var(--line);border-radius:14px;font-size:clamp(28px,6.8vw,38px);width:100%;background:#fff;
  transition:border-color .12s ease, box-shadow .12s ease;
}
input:focus, textarea:focus{outline:none;border-color:var(--focus); box-shadow:0 0 0 3px rgba(176,183,191,.15)}
input.invalid, textarea.invalid{border-color:#e53935 !important; box-shadow:0 0 0 3px rgba(229,57,53,.15)}
.grid-num{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
.grid-1col{display:grid;grid-template-columns:1fr;gap:12px;margin-bottom:12px}
label{display:flex;flex-direction:column;font-size:clamp(22px,4.6vw,28px);gap:8px}
/* æ•°å­—æ¬„å¹… */
.num input{max-width:180px}
.num-wide input{max-width:320px}
/* æ°å/é›»è©±/éƒµä¾¿ç•ªå· å¹…ï¼ˆå·¦å¯„ã›ãƒ»ç¸®å°ï¼‰ */
#rowName input{max-width:50%; margin-left:0}
#rowPhone input{max-width:50%; margin-left:0}
#rowZip input{max-width:33.3333%; margin-left:0}
/* ? ã‚¢ã‚¤ã‚³ãƒ³ãƒœã‚¿ãƒ³ */
.rowWithBtn{display:flex;gap:10px;align-items:center}
.iconBtn{appearance:none;border:2px solid var(--ink);background:#fff;color:#000;width:48px;height:48px;border-radius:50%;font-weight:900;font-size:28px;line-height:44px;text-align:center}
.iconBtn:active{transform:translateY(2px)}

/* è¦‹ç©ã‚Š */
.est{padding:14px;background:#fafafa;border:2px dashed var(--line);border-radius:14px;margin-bottom:14px}

/* ãƒãƒŠãƒ¼ */
.banner{background:#fff3cd;border:2px solid #ffeeba;border-radius:14px;padding:12px;margin:0 12px 14px}

/* ãƒ†ã‚­ã‚¹ãƒˆ */
.err{color:#d32f2f;font-size:clamp(22px,4.6vw,28px)}
.muted{color:var(--muted);font-size:clamp(22px,4.6vw,28px)}
.ft{padding:28px 16px;text-align:center;color:var(--muted)}

/* ========== Skeleton ========== */
.skeleton{min-height:200px;background:linear-gradient(90deg,#f0f0f0 25%,#f8f8f8 37%,#f0f0f0 63%);background-size:400% 100%;animation:shimmer .8s ease-in-out infinite}
@keyframes shimmer{0%{background-position:100% 0}100%{background-position:0 0}}

/* ========== ãƒ¢ãƒ¼ãƒ€ãƒ«/ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ ========== */
.modal{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background:rgba(0,0,0,.35); z-index:10000; padding:16px;
}
.modal-card{
  background:#fff; border-radius:18px; max-width:900px; width:100%;
  box-shadow:0 16px 44px rgba(0,0,0,.3);
  display:flex; flex-direction:column; max-height:90vh; overflow:hidden;
}
.modal-hd{display:flex;align-items:center;justify-content:space-between;margin:10px 10px 0 10px}
.modal-close{appearance:none;border:none;background:transparent;font-size:clamp(36px,8vw,44px);line-height:1}
.modal-body{
  font-size:clamp(26px,5.8vw,34px); line-height:1.6;
  padding:10px 16px 4px 16px; overflow:auto; -webkit-overflow-scrolling:touch;
  max-height:calc(90vh - 140px);
}
.terms-scroll{max-height:calc(90vh - 160px)}
.modal-ft{display:flex; justify-content:flex-end; margin:8px 16px 16px 16px; flex-shrink:0}

/* åŒæ„ãƒã‚§ãƒƒã‚¯ï¼ˆæ‹¡å¤§&ä¸­å¤®å¯„ã›ï¼‰ */
.agree{ display:flex; align-items:center; justify-content:center; gap:16px; margin-top:12px; }
.agree input{ transform:scale(2.5); transform-origin:center; width:32px; height:32px; }
.agree-label{ text-align:center; }

/* æ³¨æ„æ–‡ã®å°ã‚µã‚¤ã‚ºç®‡æ¡æ›¸ãï¼ˆç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«å†…ï¼‰ */
.small-note{ font-size: clamp(20px, 4.6vw, 26px); color:#333; padding-left:1.1em; margin:8px 0 0; }
.small-note li{ list-style:disc; margin-left:1em; margin-bottom:.2em; }

/* é€ä¿¡ä¸­ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆã‚ˆã‚Šæš—ãï¼‰ */
.overlay{ position:fixed;inset:0;display:flex;align-items:center;justify-content:center; background:rgba(0,0,0,.6);z-index:11000 }
.overlay-card{ background:#fff;border-radius:14px;padding:18px 22px;font-weight:900; font-size:clamp(28px,6.8vw,38px) }

/* ========== æˆåŠŸæ¼”å‡ºï¼ˆæ—§ï¼šä¸­å¤®ãã®ã“ï¼‰ ========== */
.success{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;opacity:0;transition:opacity .3s ease;z-index:9998}
.success.show{opacity:1}
.success-inner{position:relative;display:flex;flex-direction:column;align-items:center;gap:16px}
.success .done{font-weight:900;text-align:center;font-size:clamp(48px, 10vw, 72px);line-height:1.1}
.success .done div:nth-child(1){margin-bottom:.2em}
.bounce{position:relative;animation:pop 1.2s ease-out forwards}
.bounce.mush{width:min(38vw,200px);animation-delay:.15s}
@keyframes pop{ 0%{transform:translateY(80%); opacity:0} 40%{transform:translateY(-10%); opacity:1} 60%{transform:translateY(4%)} 100%{transform:translateY(0)} }

/* ã€Œæœªå…¥åŠ›ã®æ¬„ãŒã‚ã‚Šã¾ã™ã€é™ã£ã¦ãã‚‹æ¼”å‡º */
.nudge{
  position:fixed; top:-120px; left:0; right:0; margin:auto;
  width:min(90vw, 660px); background:#e53935; color:#fff; text-align:center;
  border-radius:14px; padding:14px 16px; font-weight:900; font-size:clamp(28px,6.8vw,38px);
  z-index:12000; box-shadow:0 10px 24px rgba(0,0,0,.25);
  transition:transform .5s cubic-bezier(.2,.8,.3,1), opacity .5s ease;
  transform:translateY(0); opacity:.0;
}
.nudge.show{ transform:translateY(160px); opacity:1; }

/* ãƒãƒ‹ãƒ¼ãƒãƒƒãƒˆï¼ˆç”»é¢å¤–ï¼‰ */
.hp{position:absolute; left:-9999px; top:auto; width:1px; height:1px; opacity:0}

/* ========== ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¨ãƒ©ãƒ¼ãƒãƒŠãƒ¼ï¼ˆä¸Šã‹ã‚‰é™ã‚Šã‚‹ï¼‰ ========== */
#mailError{
  position:fixed; top:-200px; left:0; right:0; margin:auto;
  width:min(92vw, 820px); background:var(--error); color:#fff; text-align:center; font-weight:900;
  border-radius:16px; padding:18px 20px; font-size:clamp(30px,7.6vw,44px); line-height:1.25; z-index:13000;
  box-shadow:0 14px 28px rgba(0,0,0,.3);
  transition:transform .5s cubic-bezier(.2,.8,.3,1), opacity .5s ease;
  transform:translateY(0); opacity:0;
}
#mailError.show{ transform:translateY(240px); opacity:1; }
#mailError small{ display:block; font-size:clamp(22px,5.2vw,28px); font-weight:800; margin-top:.2em; }

/* ========== äºˆç´„å®Œäº†ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆç™½æ–‡å­—ã§ç››å¤§ã«ï¼‰ ========== */
.final-modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.55); z-index:12500; padding:16px;
}
.final-card{
  background:linear-gradient(145deg,#111,#222); color:#fff; text-align:center; border-radius:22px;
  width:min(92vw,900px); padding:28px 24px; box-shadow:0 18px 48px rgba(0,0,0,.55); animation:popIn .26s ease-out both;
}
@keyframes popIn{ 0%{transform:scale(.96); opacity:0} 100%{transform:scale(1); opacity:1} }
.final-title{ font-size:clamp(42px,10vw,72px); font-weight:900; letter-spacing:.02em; margin:6px 0 4px; text-shadow:0 2px 0 rgba(0,0,0,.25); }
.final-sub{ font-size:clamp(28px,6.8vw,40px); opacity:.95; margin:0 0 12px; }
.final-mush{ font-size:clamp(60px,16vw,120px); line-height:1; filter:drop-shadow(0 6px 14px rgba(255,0,0,.35)); animation:float 1.6s ease-in-out infinite; }
@keyframes float{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }

/* ========== ãƒ•ãƒƒã‚¿ ========== */
.ft{padding:28px 16px;text-align:center;color:var(--muted)}

/* ===================================================================
   è¿½åŠ ï¼šOTPï¼ˆèªè¨¼ã‚³ãƒ¼ãƒ‰ï¼‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæœ€å°é™ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè£œåŠ©ã®ã¿ï¼‰
   â€» æ—¢å­˜ã®è‰²ãƒ»ã‚¿ã‚¤ãƒãƒ»ãƒœã‚¿ãƒ³/å…¥åŠ›ã®ã‚µã‚¤ã‚ºã¯ãã®ã¾ã¾åˆ©ç”¨
=================================================================== */
#otpSection{ margin:8px 0 12px; }
.otp-lead{ margin:0 0 8px 0; }
.otp-grid{ display:grid; grid-template-columns: auto 1fr; gap:10px; align-items:center; }
.otp-actions{ display:grid; grid-template-columns: auto auto; gap:10px; align-items:center; justify-content:start; }
/* ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³è¡¨ç¤ºï¼ˆæ—¢å­˜mutedã¨åŒç­‰ãƒˆãƒ¼ãƒ³ï¼‰ */
#otpCountdown{ font-size:clamp(22px,4.6vw,28px); color:var(--muted); }

/* è¿½åŠ  */
.otp-section { text-align: center; margin-bottom: 12px; }
/* å…¥åŠ›å¹…ï¼š4æ¡ã‚³ãƒ¼ãƒ‰æ¬„ã‚’å…¨ä½“ã®1/3ã«ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«å¹…ã«å¯¾ã—ã¦ï¼‰ */
#otpInput{ flex: 0 1 33.3333%; max-width: 33.3333%; }
/* ã€Œã‚³ãƒ¼ãƒ‰é€ä¿¡ã€ã®æ–‡å­—ã‚’1è¡Œå›ºå®šï¼ˆæ”¹è¡Œã•ã›ãªã„ï¼‰ */
#otpSendBtn{ white-space: nowrap; }
/* æŠ¼ã—ãŸæ„Ÿï¼ˆå¿™ã—ã„çŠ¶æ…‹ã®è¦–è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰ */
.btn.busy, .btn-outline.busy{ opacity:.7; pointer-events:none; }
/* ã‚¯ãƒªãƒƒã‚¯ç›´å¾Œã®è»½ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆæ—¢å­˜pressã®è£œå¼·ï¼‰ */
.btn.clicked, .btn-outline.clicked{ transform: translateY(2px); box-shadow: inset 0 2px 3px rgba(0,0,0,.2); }

/* ã‚¨ãƒ©ãƒ¼æ™‚ã®è»½ã„æºã‚Œï¼ˆæ—¢å­˜ .shake ã‚’æ´»ç”¨å¯èƒ½ï¼‰ */
.shake{ animation:shake .2s linear 0s 2; }
@keyframes shake{ 0%{transform:translateX(0)} 25%{transform:translateX(4px)} 50%{transform:translateX(-4px)} 75%{transform:translateX(4px)} 100%{transform:translateX(0)} }

/* æŠ¼ä¸‹ä¸­ãƒ»å‡¦ç†ä¸­ */
.btn.processing { background: #666; transform: scale(0.97); box-shadow: inset 0 3px 6px rgba(0,0,0,0.25); }
/* æˆåŠŸæ™‚ */
.btn.success { background: #2e6b4e; color: #fff; transform: scale(1.05); transition: all 0.3s ease; }
/* å¤±æ•—ãƒ»ã‚¨ãƒ©ãƒ¼æ™‚ */
.btn.error { background: #8B0000; color: #fff; transform: scale(0.95); animation: shake 0.3s linear; }

/* ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šç·š */
.section-divider { border: none; border-top: 1px solid #ddd; margin: 16px 0; }

/* ä¸­å¤®å¯„ã›è¡Œ */
.otp-center { display: flex; justify-content: center; align-items: center; gap: 12px; }


/* ===== åˆ©ç”¨è¦ç´„ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼šæŠ˜ã‚Šè¿”ã— & ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ ===== */
#infoModal {
  /* ã™ã§ã« display:flex ã§ä¸­å¤®å¯„ã›ã•ã‚Œã¦ã„ã‚‹æƒ³å®šã€‚ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã ã‘è¿½åŠ ã—ã¦ã‚‚ä»–UIã«å½±éŸ¿ãªã— */
  padding: 16px;
  box-sizing: border-box;
}

/* ã‚¿ã‚¤ãƒˆãƒ«ã¯å›ºå®šã€æœ¬æ–‡ã®ã¿ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
#infoModal .info-title {
  flex: 0 0 auto;
  /* é•·ã„å˜èªã§ã®ã¯ã¿å‡ºã—é˜²æ­¢ */
  overflow-wrap: anywhere;
  word-break: break-word;
  white-space: normal;
}

/* æœ¬æ–‡ï¼šç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼†é•·æ–‡æŠ˜ã‚Šè¿”ã— */
#infoModal .info-body {
  flex: 1 1 auto;
  max-height: 80vh;                 /* ç”»é¢ã®8å‰²ã¾ã§ã«åˆ¶é™ï¼ˆãƒ˜ãƒƒãƒ€/ä½™ç™½åˆ†ã¯ã¿å‡ºã•ãªã„ï¼‰ */
  overflow-y: auto;                 /* ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯ */
  -webkit-overflow-scrolling: touch;/* iOSæ…£æ€§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
  padding-right: 8px;               /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã§ã®æ–‡å­—æ½°ã‚Œè»½æ¸› */
  box-sizing: border-box;

  /* æ–‡ç« ã¯ã¿å‡ºã—å¯¾ç­–ä¸€å¼ */
  overflow-wrap: anywhere;
  word-break: break-word;
  white-space: normal;              /* preè¦ç´ ä»¥å¤–ã¯é€šå¸¸æŠ˜è¿”ã— */
}

/* pre/code ã®ã¯ã¿å‡ºã—å¯¾ç­–ï¼ˆtermsã«ã‚³ãƒ¼ãƒ‰/è¡¨è¨˜ãŒã‚ã‚‹å ´åˆã®ä¿é™ºï¼‰ */
#infoModal .info-body pre,
#infoModal .info-body code {
  white-space: pre-wrap;            /* æŠ˜è¿”ã— */
  word-break: break-word;
}

/* ç”»åƒãƒ»è¡¨ãŒæ¨ªã«ã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã« */
#infoModal .info-body img {
  max-width: 100%;
  height: auto;
}
#infoModal .info-body table {
  width: 100%;
  border-collapse: collapse;
}
#infoModal .info-body table,
#infoModal .info-body thead,
#infoModal .info-body tbody {
  display: block;                   /* æ¨ªæº¢ã‚Œæ™‚ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’è¨±å¯ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰ */
}
#infoModal .info-body tr {
  display: table;                   /* è¡¨ç¤ºå´©ã‚Œã‚’æŠ‘ãˆã¤ã¤ */
  width: 100%;
  box-sizing: border-box;
}
#infoModal .info-body td,
#infoModal .info-body th {
  word-break: break-word;
}

/* å°ã•ãªç«¯æœ«ã§ã®å®‰å…¨å´ä½™ç™½ */
@media (max-width: 480px) {
  #infoModal .info-body {
    max-height: 78vh;
  }
}


/* ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã®åŒæ„ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚µã‚¤ã‚ºèª¿æ•´ */
#reviewAgree {
  transform: scale(0.88); /* â† å…ƒã®ç´„2/3ã‚µã‚¤ã‚ºã«ç¸®å° */
  transform-origin: left center;
  margin-right: 6px;
  vertical-align: middle;
}



</style>

</head>
<body>
  <!-- èƒŒæ™¯ãƒ­ã‚´ -->
  <div class="bg-logo"></div>

  <!-- å…¥åŠ›æœªå®Œäº†ã®å¤§ã‚¢ãƒ©ãƒ¼ãƒˆ -->
  <div id="nudge" class="nudge">æœªå…¥åŠ›ã®æ¬„ãŒã‚ã‚Šã¾ã™</div>

  <!-- é€ä¿¡ä¸­ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
  <div id="overlay" class="overlay" style="display:none">
    <div class="overlay-card"><div id="overlayText">é€ä¿¡ä¸­â€¦</div></div>
  </div>

  <!-- ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="reviewModal" class="modal" style="display:none" role="dialog" aria-modal="true">
    <div class="modal-card" role="document">
      <div class="modal-hd">
        <strong>äºˆç´„å†…å®¹ã®ç¢ºèª</strong>
        <button class="modal-close" onclick="closeReviewModal()" aria-label="é–‰ã˜ã‚‹">Ã—</button>
      </div>
      <div class="modal-body">
        <p><b>æ—¥æ™‚</b>ï¼š<span id="rvDateTime">-</span></p>
        <p><b>äººæ•°</b>ï¼š<span id="rvPeople">-</span></p>
        <p><b>æ°å</b>ï¼š<span id="rvName">-</span></p>
        <p><b>ãƒ¡ãƒ¼ãƒ«</b>ï¼š<span id="rvEmail">-</span></p>
        <p><b>é›»è©±</b>ï¼š<span id="rvPhone">-</span></p>
        <p><b>ä½æ‰€</b>ï¼š<span id="rvAddr">-</span></p>
        <p><b>åˆè¨ˆé‡‘é¡</b>ï¼š<span id="rvAmount">-</span></p>
        <hr/>

        <!-- ã“ã“ã‹ã‚‰ï¼šãƒ¡ãƒ¼ãƒ«èªè¨¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="otpSection" class="otp-section">
          <p id="otpInfo" class="muted">
            ã‚³ãƒ¼ãƒ‰é€ä¿¡ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã„ãŸã ã<br>
            ãƒ¡ãƒ¼ãƒ«ã«æ›¸ã„ã¦ã‚ã‚‹4æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
          </p>
          <div class="otp-center">
            <button id="otpSendBtn" class="btn-outline small" type="button" aria-live="polite">ã‚³ãƒ¼ãƒ‰é€ä¿¡</button>
            <input id="otpInput" type="tel" inputmode="numeric" pattern="[0-9]*" maxlength="4" placeholder="4æ¡ã‚³ãƒ¼ãƒ‰" />
          </div>
          <div class="otp-center" style="margin-top:12px">
            <button id="otpVerifyBtn" class="btn small" type="button" aria-live="polite">ç¢ºèª</button>
          </div>
          <div id="otpCountdown" class="muted" style="display:none; margin-top:6px"></div>
        </div>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šç·š -->
        <hr class="section-divider" />

        <div class="terms" style="margin-top:12px">
          <ul class="small-note">
            <li>äºˆç´„å½“æ—¥ï¼ˆ0ï¼š00ä»¥é™ï¼‰ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯å…¨é¡ã”è² æ‹…ã„ãŸã ãã¾ã™ã€‚</li>
            <li>äºˆç´„ã‚’ç¢ºå®šã™ã‚‹ã¨ãƒ¡ãƒ¼ãƒ«ãŒå±Šãã¾ã™ã€‚</li>
            <li>å±Šã‹ãªã„å ´åˆã¯ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã”ç¢ºèªã®ä¸Šã€ã‚‚ã†ä¸€åº¦äºˆç´„ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚</li>
          </ul>
        </div>

        <label class="agree" style="margin-top:8px">
          <input id="reviewAgree" type="checkbox" onchange="onAgreeChanged()">
          <span class="agree-label">äºˆç´„å†…å®¹ã«é–“é•ãˆãŒç„¡ã„ã“ã¨ã‚’ç¢ºèªã—è¦ç´„ã«åŒæ„ã—ã¾ã™</span>
        </label>
        <!-- ğŸ‘‡ ã“ã®è¡Œã¯å‰Šé™¤ -->
        <!-- <div class="muted" style="margin-top:4px">åˆ©ç”¨è¦ç´„ã«åŒæ„ã—ã¾ã—ãŸ</div> -->
      </div>
      <div class="modal-ft">
        <button id="reviewConfirmBtn" class="btn" disabled onclick="finalSubmit()">äºˆç´„ã‚’ç¢ºå®š</button>
      </div>
    </div>
  </div>

  <!-- OTPæˆåŠŸãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="otpOkModal" class="modal" style="display:none" role="dialog" aria-modal="true">
    <div class="modal-card" role="document">
      <div class="modal-hd">
        <strong>èªè¨¼ã§ãã¾ã—ãŸ</strong>
        <button class="modal-close" onclick="closeOtpOkModal()" aria-label="é–‰ã˜ã‚‹">Ã—</button>
      </div>
      <div class="modal-body">
        <p>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®èªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸã€‚</p>
      </div>
      <div class="modal-ft">
        <button class="btn" type="button" onclick="closeOtpOkModal()">é–‰ã˜ã‚‹</button>
      </div>
    </div>
  </div>

  <!-- â–¼â–¼ è¿½åŠ ï¼šã‚­ãƒ£ãƒ³ã‚»ãƒ«æœ€çµ‚ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« â–¼â–¼ -->
  <div id="cancelConfirmModal" class="modal" style="display:none" role="dialog" aria-modal="true">
    <div class="modal-card" role="document">
      <div class="modal-hd">
        <strong>ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®æœ€çµ‚ç¢ºèª</strong>
        <button class="modal-close" id="cancelConfirmNo" aria-label="é–‰ã˜ã‚‹">Ã—</button>
      </div>
      <div class="modal-body">
        <p>å½“æ—¥ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®å ´åˆã¯å…¨é¡è² æ‹…ã¨ãªã‚Šã¾ã™</p>
        <p>æœ¬å½“ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«å‡¦ç†ã‚’è¡Œã„ã¾ã™ã‹ï¼Ÿ</p>
      </div>
      <div class="modal-ft">
        <button class="btn-outline" id="cancelConfirmNoBtn" type="button">ã„ã„ãˆ</button>
        <button class="btn" id="cancelConfirmYes" type="button">ã¯ã„</button>
      </div>
    </div>
  </div>
  <!-- â–²â–² è¿½åŠ ã“ã“ã¾ã§ï¼šã‚­ãƒ£ãƒ³ã‚»ãƒ«æœ€çµ‚ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« â–²â–² -->

  <!-- â–¼â–¼ è¿½åŠ ï¼šã‚­ãƒ£ãƒ³ã‚»ãƒ«çµæœãƒ¢ãƒ¼ãƒ€ãƒ« â–¼â–¼ -->
  <div id="cancelResultModal" class="modal" style="display:none" role="dialog" aria-modal="true">
    <div class="modal-card" role="document">
      <div class="modal-hd">
        <strong>ã‚­ãƒ£ãƒ³ã‚»ãƒ«çµæœ</strong>
        <button class="modal-close" id="cancelResultClose" aria-label="é–‰ã˜ã‚‹">Ã—</button>
      </div>
      <div class="modal-body" id="cancelResultBody">
        <!-- JSã§æ–‡é¢ã‚’å·®ã—æ›¿ãˆã¾ã™ -->
      </div>
      <div class="modal-ft">
        <button class="btn" id="cancelResultCloseBtn" type="button">é–‰ã˜ã‚‹</button>
      </div>
    </div>
  </div>
  <!-- â–²â–² è¿½åŠ ã“ã“ã¾ã§ï¼šã‚­ãƒ£ãƒ³ã‚»ãƒ«çµæœãƒ¢ãƒ¼ãƒ€ãƒ« â–²â–² -->

  <!-- æƒ…å ±ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="infoModal" class="modal" style="display:none" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-hd">
        <strong class="info-title">ã”æ¡ˆå†…</strong>
        <button class="modal-close" onclick="closeInfoModal()" aria-label="é–‰ã˜ã‚‹">Ã—</button>
      </div>
      <div class="info-body"></div>
      <div class="modal-ft"><button class="btn" onclick="closeInfoModal()">é–‰ã˜ã‚‹</button></div>
    </div>
  </div>

  <!-- åˆ©ç”¨è¦ç´„ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆãƒšãƒ¼ã‚¸å†… / terms.html ã‚’èª­ã¿è¾¼ã¿ï¼‰ -->
  <div id="termsModal" class="modal" style="display:none" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-hd">
        <strong>åˆ©ç”¨è¦ç´„</strong>
        <button class="modal-close" onclick="closeTerms()" aria-label="é–‰ã˜ã‚‹">Ã—</button>
      </div>
      <div class="modal-body terms-scroll">
<section>
  <h3>ãƒˆãƒ©ãƒ³ãƒãƒªãƒ³ãƒ‘ãƒ¼ã‚¯åˆ©ç”¨è¦ç´„</h3>
  <p>æœ¬è¦ç´„ã¯ã€å½“ãƒˆãƒ©ãƒ³ãƒãƒªãƒ³ãƒ‘ãƒ¼ã‚¯ï¼ˆä»¥ä¸‹ã€Œå½“æ–½è¨­ã€ï¼‰ã®åˆ©ç”¨ã«é–¢ã—ã€å½“æ–½è¨­ã‚’åˆ©ç”¨ã•ã‚Œã‚‹ã™ã¹ã¦ã®ãŠå®¢æ§˜ï¼ˆä»¥ä¸‹ã€ŒãŠå®¢æ§˜ã€ï¼‰ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚ãŠå®¢æ§˜ã¯å½“æ–½è¨­ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€æœ¬è¦ç´„ã«åŒæ„ã—ãŸã‚‚ã®ã¨ã¿ãªã—ã¾ã™ã€‚</p>

  <h4>ç¬¬1æ¡ï¼ˆé©ç”¨ç¯„å›²ï¼‰</h4>
  <p>æœ¬è¦ç´„ã¯ã€å½“æ–½è¨­ã®æ–½è¨­ãƒ»è¨­å‚™ãƒ»ä»˜å¸¯ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«é–¢ã™ã‚‹ä¸€åˆ‡ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚å€‹åˆ¥ã®æ²ç¤ºãƒ»æ¡ˆå†…ãƒ»ã‚¹ã‚¿ãƒƒãƒ•ã®æŒ‡ç¤ºã¯æœ¬è¦ç´„ã®ä¸€éƒ¨ã‚’æ§‹æˆã—ã€ç›¸äº’ã«è£œå®Œã•ã‚Œã¾ã™ã€‚</p>

  <h4>ç¬¬2æ¡ï¼ˆåˆ©ç”¨æ¡ä»¶ï¼‰</h4>
  <ol>
    <li>ä¸­å­¦ç”Ÿä»¥ä¸‹ã®ãŠå®¢æ§˜ã¯ã€å¿…ãšä¿è­·è€…ã®åŒä¼´ã®ã‚‚ã¨ã§ã”åˆ©ç”¨ãã ã•ã„ã€‚</li>
    <li>é«˜æ ¡ç”Ÿï¼ˆæœªæˆå¹´ï¼‰ã®ãŠå®¢æ§˜ã¯ã€ä¿è­·è€…ã®åŒæ„ãŒã‚ã‚‹å ´åˆã«é™ã‚Šã€å˜ç‹¬ã§ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</li>
    <li>æ¬¡ã«è©²å½“ã™ã‚‹æ–¹ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚
      <ul>
        <li>é£²é…’ã—ã¦ã„ã‚‹æ–¹</li>
        <li>å¦Šå¨ ä¸­ã®æ–¹</li>
        <li>åŒ»å¸«ã‹ã‚‰é‹å‹•åˆ¶é™ã‚’å—ã‘ã¦ã„ã‚‹æ–¹</li>
        <li>ä½“èª¿ä¸è‰¯ï¼ˆç™ºç†±ãƒ»ã‚ã¾ã„ãƒ»éåŠ´ãƒ»ç¡çœ ä¸è¶³ç­‰ï¼‰ã®æ–¹</li>
      </ul>
    </li>
    <li>å½“æ–½è¨­ã‚¹ã‚¿ãƒƒãƒ•ã®æŒ‡ç¤ºã«å¾“ã‚ãªã„å ´åˆã€åˆ©ç”¨ã®ä¸­æ­¢ã¾ãŸã¯é€€å ´ã‚’ãŠé¡˜ã„ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
  </ol>

  <h4>ç¬¬3æ¡ï¼ˆå±é™ºã®èªè­˜ã¨è‡ªå·±è²¬ä»»ï¼‰</h4>
  <ol>
    <li>ãƒˆãƒ©ãƒ³ãƒãƒªãƒ³ã®åˆ©ç”¨ã«ã¯ã€è»¢å€’ãƒ»è¡çªãƒ»éª¨æŠ˜ãƒ»æ»æŒ«ç­‰ã®é‡å¤§ãªäº‹æ•…ã®å±é™ºãŒä¼´ã†ã“ã¨ã‚’ååˆ†ç†è§£ã—ã€è‡ªå·±ã®è²¬ä»»ã«ãŠã„ã¦åˆ©ç”¨ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</li>
    <li>å½“æ–½è¨­ã¯å®‰å…¨ç®¡ç†ã«åŠªã‚ã¾ã™ãŒã€åˆ©ç”¨ä¸­ã«ç™ºç”Ÿã—ãŸå‚·å®³ãƒ»äº‹æ•…ã«ã¤ã„ã¦ã€å½“æ–½è¨­ã«æ•…æ„ã¾ãŸã¯é‡å¤§ãªéå¤±ãŒã‚ã‚‹å ´åˆã‚’é™¤ãã€ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
  </ol>

  <h4>ç¬¬4æ¡ï¼ˆå®™è¿”ã‚Šã®ç¦æ­¢ï¼‰</h4>
  <ol>
    <li>å®™è¿”ã‚Šï¼ˆå‰æ–¹ãƒ»å¾Œæ–¹ãƒ»å´æ–¹ã‚’å«ã‚€ä¸€åˆ‡ã®å›è»¢æŠ€ï¼‰ã¯ã€åŸå‰‡ã¨ã—ã¦ç¦æ­¢ã—ã¾ã™ã€‚</li>
    <li>å½“æ–½è¨­ã‚¹ã‚¿ãƒƒãƒ•ãŒãã®éƒ½åº¦è¨±å¯ã—ãŸå ´åˆã«é™ã‚Šã€å‘¨å›²ã®å®‰å…¨ã‚’ååˆ†ç¢ºèªã®ã†ãˆã§å®Ÿæ–½ã§ãã¾ã™ã€‚è¨±å¯ã¯å„å›ã”ã¨ã«å¿…è¦ã§ã™ã€‚</li>
    <li>è¨±å¯ãŒã‚ã‚‹å ´åˆã§ã‚‚ã€å½“æ–½è¨­ãŒå½“è©²è¡Œç‚ºã®çµæœã«ã¤ã„ã¦è²¬ä»»ã‚’è² ã†ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¹ã‚¿ãƒƒãƒ•ã®ç›®ãŒå±Šã‹ãªã„çŠ¶æ³ã§ã®å®™è¿”ã‚Šã¯ç¦æ­¢ã—ã¾ã™ã€‚</li>
  </ol>

  <h4>ç¬¬5æ¡ï¼ˆå…è²¬äº‹é …ï¼‰</h4>
  <p>æ¬¡ã®å ´åˆã€å½“æ–½è¨­ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚ä¸‡ä¸€äº‹æ•…ãŒç™ºç”Ÿã—ãŸå ´åˆã§ã‚‚ã€å½“æ–½è¨­ã®è²¬ä»»ã¯å½“æ–½è¨­ãŒåŠ å…¥ã™ã‚‹ä¿é™ºã®è£œå„Ÿç¯„å›²å†…ã«é™å®šã•ã‚Œã¾ã™ã€‚</p>
  <ul>
    <li>ãŠå®¢æ§˜è‡ªèº«ã®ä¸æ³¨æ„ãƒ»éå¤±ã«ã‚ˆã‚‹äº‹æ•…</li>
    <li>ä»–ã®ãŠå®¢æ§˜ã¨ã®æ¥è§¦ãƒ»è¡çªã«èµ·å› ã™ã‚‹äº‹æ•…</li>
    <li>ãƒ«ãƒ¼ãƒ«é•åãƒ»ã‚¹ã‚¿ãƒƒãƒ•æŒ‡ç¤ºé•åã«èµ·å› ã™ã‚‹äº‹æ•…</li>
    <li>æ‰€æŒå“ã®ç´›å¤±ãƒ»ç›—é›£ãƒ»ç ´æ</li>
  </ul>

  <h4>ç¬¬6æ¡ï¼ˆç¦æ­¢è¡Œç‚ºï¼‰</h4>
  <ul>
    <li>å±é™ºè¡Œç‚ºï¼ˆè¤‡æ•°äººã§åŒä¸€é¢ã‚’åŒæ™‚åˆ©ç”¨ã€ä»–äººã‚’æŠ¼ã™ã€ä¹±æš´ãªã‚¸ãƒ£ãƒ³ãƒ—ç­‰ï¼‰</li>
    <li>é£²é…’ãƒ»å–«ç…™å¾Œã®åˆ©ç”¨</li>
    <li>å½“æ–½è¨­è¨­å‚™ã®æ•…æ„ã¾ãŸã¯éå¤±ã«ã‚ˆã‚‹ç ´æè¡Œç‚º</li>
  </ul>

  <h4>ç¬¬7æ¡ï¼ˆæå®³è³ å„Ÿï¼‰</h4>
  <ol>
    <li>ãŠå®¢æ§˜ãŒå½“æ–½è¨­ã¾ãŸã¯ç¬¬ä¸‰è€…ã«æå®³ã‚’ä¸ãˆãŸå ´åˆã€ãã®æå®³ã‚’è³ å„Ÿã—ã¦ã„ãŸã ãã¾ã™ã€‚</li>
    <li>æœªæˆå¹´è€…ã®åˆ©ç”¨ã«é–¢ã—ã€ä¿è­·è€…ã¯å½“è©²æœªæˆå¹´è€…ã®è¡Œç‚ºã«ã¤ã„ã¦é€£å¸¯ã—ã¦è²¬ä»»ã‚’è² ã„ã¾ã™ã€‚</li>
  </ol>

  <h4>ç¬¬8æ¡ï¼ˆå¥åº·çŠ¶æ…‹ã®ç”³å‘Šï¼‰</h4>
  <ol>
    <li>æŒç—…ãƒ»æ—¢å¾€ç—‡ãƒ»æ€ªæˆ‘ç­‰ã®ã‚ã‚‹æ–¹ã¯ã€åˆ©ç”¨é–‹å§‹å‰ã«å¿…ãšç”³å‘Šã—ã¦ãã ã•ã„ã€‚</li>
    <li>ç”³å‘ŠãŒãªãç™ºç”Ÿã—ãŸäº‹æ•…ã«ã¤ã„ã¦ã€å½“æ–½è¨­ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
  </ol>

  <h4>ç¬¬9æ¡ï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»é…åˆ»è¦å®šï¼‰</h4>
  <ol>
    <li>ã”äºˆç´„å½“æ—¥ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼ˆå½“æ—¥0:00ä»¥é™ï¼‰ã¯ã€ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™ã¨ã—ã¦åˆ©ç”¨æ–™é‡‘ã®å…¨é¡ã‚’ãŠæ”¯æ‰•ã„ã„ãŸã ãã¾ã™ã€‚</li>
    <li>ã”äºˆç´„æ™‚é–“ã¾ã§ã«æ¥åº—ãŒãªã„å ´åˆã¯ã€å½“æ—¥ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ‰±ã„ã¨ã—ã¾ã™ã€‚</li>
    <li>é…åˆ»ã•ã‚ŒãŸå ´åˆã§ã‚‚ã€åˆ©ç”¨æ™‚é–“ã¯ã”äºˆç´„æ ã®æ™‚é–“å†…ã«é™ã‚‰ã‚Œã€å»¶é•·ã¯ã§ãã¾ã›ã‚“ã€‚</li>
  </ol>

  <h4>ç¬¬10æ¡ï¼ˆè¦ç´„ã®å¤‰æ›´ï¼‰</h4>
  <p>å½“æ–½è¨­ã¯ã€å¿…è¦ã«å¿œã˜ã¦æœ¬è¦ç´„ã‚’æ”¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æœ€æ–°ã®è¦ç´„ã¯æ–½è¨­å†…æ²ç¤ºã¾ãŸã¯å½“æ–½è¨­ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«æ²è¼‰ã—ã¾ã™ã€‚</p>

  <h4>ç¬¬11æ¡ï¼ˆæº–æ‹ æ³•ãƒ»åˆæ„ç®¡è½„ï¼‰</h4>
  <ol>
    <li>æœ¬è¦ç´„ã¯æ—¥æœ¬æ³•ã«æº–æ‹ ã—ã¾ã™ã€‚</li>
    <li>æœ¬è¦ç´„ã«é–¢ã—ã¦ç´›äº‰ãŒç”Ÿã˜ãŸå ´åˆã¯ã€å½“æ–½è¨­æ‰€åœ¨åœ°ã‚’ç®¡è½„ã™ã‚‹è£åˆ¤æ‰€ã‚’ç¬¬ä¸€å¯©ã®å°‚å±çš„åˆæ„ç®¡è½„è£åˆ¤æ‰€ã¨ã—ã¾ã™ã€‚</li>
  </ol>
</section>

      </div>
      <div class="modal-ft">
        <button class="btn-outline" onclick="closeTerms()">é–‰ã˜ã‚‹</button>
      </div>
    </div>
  </div>

  <!-- æˆåŠŸæ¼”å‡ºï¼ˆğŸ„ã‚¨ãƒ¢ã‚¸ï¼‹ç´™å¹é›ªï¼‰â€»æ—¢å­˜ -->
  <div id="success" class="success">
    <div class="success-inner">
      <div class="confetti" aria-hidden="true"></div>
      <span class="mush-emoji bounce" role="img" aria-label="ãã®ã“"><img src="https://msp.c.yimg.jp/images/v2/FUTi93tXq405grZVGgDqG40yntl66Vd8f8A8GdNaSPNHWO-P2_c_V2IK2-hpt0qa8NpDbcpdjVjW6sjFkzU7M44H_dlad3LgBfrYR5Htin-iBe9LmvH8TtY4tuCC-Tcu-rYwQSUXycB-p2iBsqZdBaWHMlXRAs-jtx4HHo5npKOdjTPwF4fhcWRP5oZJEgTIgPvDecurUbz5xLxCrHZJ2qqeJlCcdB45iKaojAflNv1TAr0dFMmuz96UfXzfL-Guc0HQYbG-PHdtdVLPTzbfV0TWjuRgo6N-GzO8TV7FXADuj-bNxtbvZHSIu3oHMhpWVGrUPufDOGrRknWCXSlBfyVlQAOuydEcPFkln-G0GI2ilid3UFCd-FWgNcUGY_PDBlLJpQ5C7aPRiYU2r2WBJA==/h9xMJkD_9Itg3P4SOxwl718LCUU3avnPef2ZjSSdmEGOL4FxLAPbXizVCxq3FcASFy3-_NkBWTks900-c-k-c0x00ffffff-no-rj?errorImage=false" alt="ãã®ã“" style="width:1em;height:1em;vertical-align:middle;object-fit:contain;border-radius:0.1em"/></span>
      <div class="done">
        <div>äºˆç´„ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸ</div>
        <div>ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™</div>
      </div>
    </div>
  </div>

  <!-- äºˆç´„å®Œäº†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="finalModal" class="final-modal" role="dialog" aria-modal="true">
    <div class="final-card" role="document">
      <div class="final-title">äºˆç´„ãŒå®Œäº†ã—ã¾ã—ãŸ</div>
      <div class="final-sub">æ¥åº—ãŠå¾…ã¡ã—ã¦ã¾ã™</div>
      <div class="final-mush" aria-hidden="true"><img src="https://msp.c.yimg.jp/images/v2/FUTi93tXq405grZVGgDqG40yntl66Vd8f8A8GdNaSPNHWO-P2_c_V2IK2-hpt0qa8NpDbcpdjVjW6sjFkzU7M44H_dlad3LgBfrYR5Htin-iBe9LmvH8TtY4tuCC-Tcu-rYwQSUXycB-p2iBsqZdBaWHMlXRAs-jtx4HHo5npKOdjTPwF4fhcWRP5oZJEgTIgPvDecurUbz5xLxCrHZJ2qqeJlCcdB45iKaojAflNv1TAr0dFMmuz96UfXzfL-Guc0HQYbG-PHdtdVLPTzbfV0TWjuRgo6N-GzO8TV7FXADuj-bNxtbvZHSIu3oHMhpWVGrUPufDOGrRknWCXSlBfyVlQAOuydEcPFkln-G0GI2ilid3UFCd-FWgNcUGY_PDBlLJpQ5C7aPRiYU2r2WBJA==/h9xMJkD_9Itg3P4SOxwl718LCUU3avnPef2ZjSSdmEGOL4FxLAPbXizVCxq3FcASFy3-_NkBWTks900-c-k-c0x00ffffff-no-rj?errorImage=false" alt="" aria-hidden="true" style="width:1em;height:1em;vertical-align:middle;object-fit:contain;"/></div>
      <div style="margin-top:16px">
        <button class="btn" type="button"
          onclick="window.location.href='https://hoppingmushroom.com/facility/fukuyama.html'">é–‰ã˜ã‚‹</button>
      </div>
    </div>
  </div>

  <header class="hd">
    <div class="titleLogo">
      <img src="https://hoppingmushroom.com/img/header-logo-fukuyama-pc.svg" alt="ãƒ›ãƒƒãƒ”ãƒ³ãƒãƒƒã‚·ãƒ¥ç¦å±±åº—" />
      <div class="subtitle">äºˆç´„ã‚µã‚¤ãƒˆ</div>
    </div>
  </header>

  <main class="container fullbleed">
    <div id="banner" class="banner" style="display:none"></div>

    <section class="card edge">
      <h2>æ—¥ä»˜ã‚’é¸æŠ</h2>
      <div class="weekday-head">
        <div class="sun">æ—¥</div><div>æœˆ</div><div>ç«</div><div>æ°´</div><div>æœ¨</div><div>é‡‘</div><div class="sat">åœŸ</div>
      </div>
      <div id="calendar" class="calendar skeleton"></div>
    </section>

    <section class="card edge" id="slotSec" style="display:none">
      <h2><span id="selDate"></span> ã®æ™‚é–“ã‚’é¸æŠ</h2>
      <!-- ãƒ•ã‚£ãƒ«ã‚¿ï¼šäºˆç´„å¯èƒ½ã®ã¿ / ã™ã¹ã¦è¡¨ç¤º -->
      <div class="slot-filters">
        <button id="fltAvail" class="chip chip-on" type="button">äºˆç´„å¯èƒ½ã®ã¿</button>
        <button id="fltAll" class="chip" type="button">ã™ã¹ã¦è¡¨ç¤º</button>
      </div>
      <div id="slots" class="slots skeleton"></div>
    </section>

    <section class="card edge" id="formSec" style="display:none">
      <h2>äºˆç´„æƒ…å ±</h2>
      <div class="grid-num">
        <label class="num">å¤§äºº<input type="number" id="adult" min="0" value="1" inputmode="numeric" /></label>
        <label class="num">å°å­¦ç”Ÿ<input type="number" id="elem" min="0" value="0" inputmode="numeric" /></label>
        <label class="num">æœªå°±å­¦<input type="number" id="kinder" min="0" value="0" inputmode="numeric" /></label>
        <label class="num">å›æ•°åˆ¸ã®ä½¿ç”¨æšæ•°<input type="number" id="coupon" min="0" value="0" inputmode="numeric" /></label>
      </div>
      <div class="grid-1col">
        <label id="rowName">æ°å<input id="name" autocomplete="name"/></label>
        <label id="rowEmail">ãƒ¡ãƒ¼ãƒ«
          <div class="rowWithBtn">
            <input id="email" type="email" inputmode="email" autocapitalize="none" autocorrect="off" spellcheck="false" autocomplete="email"/>
            <button id="expEmailBtn" type="button" class="iconBtn" aria-label="ãƒ¡ãƒ¼ãƒ«ã®èª¬æ˜">?</button>
          </div>
          <small id="emailErr" class="err" style="display:none">æ­£ç¢ºãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</small>
        </label>
        <label id="rowPhone">é›»è©±<input id="phone" type="tel" inputmode="numeric" pattern="[0-9]*" autocomplete="tel"/></label>
        <label id="rowZip">éƒµä¾¿ç•ªå·ï¼ˆ7æ¡ï¼‰<input id="zip" inputmode="numeric" maxlength="7" placeholder="ä¾‹ 7210942" autocomplete="postal-code"/></label>
        <label id="rowAddrB">ä½æ‰€ï¼ˆè‡ªå‹•å…¥åŠ›ï¼‰
          <div class="rowWithBtn">
            <input id="addrBase" readonly placeholder="éƒµä¾¿ç•ªå·ã§è‡ªå‹•å…¥åŠ›"/>
            <button id="expAddrBtn" type="button" class="iconBtn" aria-label="ä½æ‰€ã®èª¬æ˜">?</button>
          </div>
        </label>
        <label id="rowAddrD">ç•ªåœ°ãƒ»å»ºç‰©å<textarea id="addrDetail" rows="2" placeholder="ç•ªåœ°ãƒ»å»ºç‰©åãƒ»éƒ¨å±‹ç•ªå·ãªã©"></textarea></label>
      </div>

      <!-- ãƒãƒ‹ãƒ¼ãƒãƒƒãƒˆï¼ˆäººé–“ã¯è¦‹ãˆãªã„ï¼‰ -->
      <input id="hp" type="text" class="hp" autocomplete="off" tabindex="-1" aria-hidden="true"/>

      <div class="est" id="estimate">åˆè¨ˆé‡‘é¡ï¼šâ€” å†† / äººæ•°ï¼šâ€” å</div>

      <div class="actions spread">
        <button id="termsBtn" class="btn-outline small" type="button" onclick="openTerms()">åˆ©ç”¨è¦ç´„</button>
        <button id="confirmBtn" class="btn press" type="button">äºˆç´„å†…å®¹ã‚’ç¢ºèª</button>
      </div>
    </section>

    <section class="card edge">
      <h2>äºˆç´„ã®ç¢ºèªãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«</h2>
      <div class="actions"><button id="cancelOpen" class="btn-outline press tiny">äºˆç´„ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯ã“ã¡ã‚‰</button></div>
      <div id="cancelPanel" hidden>
        <div class="grid-num">
          <label class="num-wide">äºˆç´„æ—¥ï¼ˆ8æ¡ï¼‰<input id="cidDate" inputmode="numeric" placeholder="ä¾‹ 20250919" maxlength="8"/></label>
          <label class="num">3æ¡ID<input id="cidSeq" inputmode="numeric" placeholder="ä¾‹ 001" maxlength="3"/></label>
        </div>
        <div class="grid-1col" id="cancelEmailRow">
          <label>ãƒ¡ãƒ¼ãƒ«<input id="cemail" type="email" inputmode="email" autocapitalize="none" autocorrect="off" spellcheck="false"/></label>
        </div>
        <div class="actions"><button id="cancelBtn" class="btn-outline press">ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹</button></div>
        <div id="cancelResult" class="muted"></div>
      </div>
    </section>
  </main>

  <footer class="ft"><small>Â© HoppinMush Fukuyama</small></footer>

<!-- app.core.jsï¼ˆGitHubç‰ˆã§ã¯å¾Œã§è¿½åŠ äºˆå®šï¼‰ -->


<!-- app.ui.bundle.jsï¼ˆGitHubç‰ˆã§ã¯å¾Œã§è¿½åŠ äºˆå®šï¼‰ -->


<!-- Error Modal Shim: ã™ã¹ã¦ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«åŒ–ï¼ˆè¿½è¨˜å°‚ç”¨ã€‚æ—¢å­˜UIã¯ä¸å¤‰æ›´ï¼‰ -->
<style>
  /* æ—¢å­˜ styles ã®ãƒˆãƒ¼ãƒ³ã«åˆã‚ã›ãŸè»½é‡ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆä¸Šæ›¸ãæœ€å°é™ï¼‰ */
  .emodal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;z-index:9999}
  .emodal-card{width:min(560px,92vw);background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.25);overflow:hidden}
  .emodal-hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #eee}
  .emodal-ttl{font-weight:700;font-size:16px}
  .emodal-bd{padding:16px;max-height:70vh;overflow:auto;font-size:15px;line-height:1.6;white-space:pre-wrap}
  .emodal-ft{display:flex;gap:10px;justify-content:flex-end;padding:12px 16px;border-top:1px solid #eee}
  .emodal-btn{appearance:none;border:0;border-radius:10px;padding:10px 14px;font-size:14px;cursor:pointer}
  .emodal-btn.primary{background:#E60012;color:#fff}
  .emodal-btn.secondary{background:#f2f2f2;color:#333}
  .emodal-close{background:transparent;border:0;font-size:18px;cursor:pointer;line-height:1}
  .emodal-input{width:100%;padding:10px;border:1px solid #ddd;border-radius:10px;font-size:15px}


/* infoModal ã®æœ¬æ–‡ã¨ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ãƒœã‚¿ãƒ³ã‚’ç´„3å€ã« */
#infoModal .info-body     { font-size: 45px !important; line-height: 1.8; }
#infoModal .modal-hd .info-title { font-size: 48px !important; }
#infoModal .modal-ft .btn,
#infoModal .modal-close   { font-size: 42px !important; }




</style>

<script>
(function(){
  // ã™ã§ã«é©ç”¨æ¸ˆã¿ãªã‚‰äºŒé‡é©ç”¨ã—ãªã„
  if (window.__ERR_MODAL_SHIM__) return;
  window.__ERR_MODAL_SHIM__ = true;

  // æ±ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ«ç”Ÿæˆ
  function openModal({title="ã”æ¡ˆå†…", body="", showCancel=false, showInput=false, okText="OK", cancelText="ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}){
    return new Promise(resolve=>{
      const root = document.createElement('div');
      root.className = 'emodal-backdrop';
      root.innerHTML = `
        <div class="emodal-card" role="dialog" aria-modal="true">
          <div class="emodal-hd">
            <div class="emodal-ttl">${escapeHtml(title)}</div>
            <button class="emodal-close" aria-label="é–‰ã˜ã‚‹">Ã—</button>
          </div>
          <div class="emodal-bd">
            <div class="emodal-msg">${body}</div>
            ${showInput ? `<div style="margin-top:12px"><input class="emodal-input" type="text" id="__emodal_input" /></div>` : ``}
          </div>
          <div class="emodal-ft">
            ${showCancel ? `<button class="emodal-btn secondary" data-action="cancel">${escapeHtml(cancelText)}</button>` : ``}
            <button class="emodal-btn primary" data-action="ok">${escapeHtml(okText)}</button>
          </div>
        </div>
      `;
      function cleanup(v){
        document.removeEventListener('keydown', onKey);
        root.remove();
        resolve(v);
      }
      function onKey(e){
        if(e.key === 'Escape'){ cleanup(false); }
        if(e.key === 'Enter'){ const inp = root.querySelector('#__emodal_input'); cleanup(inp ? inp.value : true); }
      }
      root.addEventListener('click', (e)=>{
        if(e.target === root) cleanup(false);
      });
      root.querySelector('.emodal-close').addEventListener('click', ()=>cleanup(false));
      root.querySelector('[data-action="ok"]').addEventListener('click', ()=>{
        const inp = root.querySelector('#__emodal_input');
        cleanup(inp ? inp.value : true);
      });
      const cancelBtn = root.querySelector('[data-action="cancel"]');
      if(cancelBtn) cancelBtn.addEventListener('click', ()=>cleanup(false));
      document.addEventListener('keydown', onKey);
      document.body.appendChild(root);
      const i = root.querySelector('#__emodal_input');
      if (i) setTimeout(()=>i.focus(), 10);
    });
  }

  function escapeHtml(s){
    return String(s==null?"":s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]));
  }

  // æ—¢å­˜ã® infoModal ã‚’ä½¿ã†çµŒè·¯ï¼ˆã‚ã‚Œã°æ´»ç”¨ï¼‰
  function showInfoModalCompat(message){
    const infoModal = document.getElementById('infoModal');
    const infoBody  = infoModal && infoModal.querySelector('.info-body');
    const open = (el)=>{ if(!el) return false; el.style.display = 'flex'; el.setAttribute('aria-modal','true'); el.setAttribute('role','dialog'); return true; };
    const closeBtn = infoModal && infoModal.querySelector('.modal-close');
    if(infoModal && infoBody){
      infoBody.textContent = String(message||'');
      open(infoModal);
      const close = ()=>{ infoModal.style.display='none'; };
      if(closeBtn) closeBtn.addEventListener('click', close, {once:true});
      const ok = infoModal.querySelector('.modal-ft .btn');
      if(ok) ok.addEventListener('click', close, {once:true});
      return true;
    }
    return false;
  }

  // ==== ã“ã“ã‹ã‚‰ã€Œæ¨ªå–ã‚Šã€ï¼šalert/confirm/prompt ã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«åŒ– ====
  const _alert  = window.alert;
  const _confirm= window.confirm;
  const _prompt = window.prompt;

  window.alert = function(message){
    // æ—¢å­˜ infoModal ãŒã‚ã‚Œã°ãã‚Œã‚’ä½¿ã„ã€ãªã‘ã‚Œã°ã‚·ãƒ 
    if (!showInfoModalCompat(message)){
      return openModal({ title: "ã”æ¡ˆå†…", body: escapeHtml(message) }).then(()=>true);
    }
  };

  window.confirm = function(message){
    // confirm ã¯ boolean è¿”å´ã€‚ã‚·ãƒ ã¯ Promise ã‚’è¿”ã™ãŒã€æ—¢å­˜ã‚³ãƒ¼ãƒ‰äº’æ›ã®ãŸã‚ setTimeout ã§åŒæœŸé¢¨ã«å‡¦ç†
    let resultBox = {v:false};
    openModal({ title:"ç¢ºèª", body: escapeHtml(message), showCancel:true, okText:"ã¯ã„", cancelText:"ã„ã„ãˆ" })
      .then(v=>{ resultBox.v = !!v; });
    // å¯èƒ½ãªé™ã‚Šã®äº’æ›ï¼šUIã¯éåŒæœŸã ãŒã€å‘¼ã³å‡ºã—å´ãŒåŒæœŸã‚’æœŸå¾…ã—ã¦ã„ã‚‹å ´åˆã¯ã€Œã¯ã„ã€ã‚’æŠ¼ã™ã¾ã§ä½•ã‚‚é€²ã¾ãªã„UIè¨­è¨ˆãŒå¤šã„
    return resultBox.v;
  };

  window.prompt = function(message, defaultValue){
    let resultBox = {v:null};
    openModal({
      title:"å…¥åŠ›",
      body: escapeHtml(message) + (defaultValue ? `<div style="margin-top:8px;color:#666;font-size:12px">åˆæœŸå€¤: ${escapeHtml(defaultValue)}</div>` : ""),
      showCancel:true, okText:"OK", cancelText:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«", showInput:true
    }).then(v=>{ resultBox.v = (v===false? null : String(v)); });
    return resultBox.v;
  };

  // ==== google.script.run ã®å¤±æ•—æ™‚ã‚‚ãƒ¢ãƒ¼ãƒ€ãƒ«ã¸ï¼ˆæ±ç”¨ãƒ˜ãƒ«ãƒ‘ï¼‰ ====
  // æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼šgoogle.script.run.withSuccessHandler(...).withFailureHandler(fn).api(...)
  // å¤±æ•—ãƒãƒ³ãƒ‰ãƒ©ã® fn å†…ã§ alert ã‚’å‘¼ã‚“ã§ã„ã‚Œã°æ—¢ã«ãƒ¢ãƒ¼ãƒ€ãƒ«åŒ–ã•ã‚Œã‚‹ãŒã€
  // ä½•ã‚‚ã—ã¦ã„ãªã„å ´åˆã«å‚™ãˆã¦ã€ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’æä¾›ï¼ˆå¿…è¦ç®‡æ‰€ã‹ã‚‰ä»»æ„ã§åˆ©ç”¨å¯èƒ½ï¼‰ã€‚
  window.showErrorModal = function(reasonOrError){
    const msg = normalizeReason(reasonOrError);
    if (!showInfoModalCompat(msg)){
      return openModal({ title:"ã‚¨ãƒ©ãƒ¼", body: escapeHtml(msg) });
    }
  };

  function normalizeReason(r){
    if (!r) return "å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚";
    if (typeof r === 'string') return r;
    if (r.message) return r.message;
    try{
      if (r.reason) return String(r.reason);
      if (r.error) return String(r.error);
      return JSON.stringify(r).slice(0,200);
    }catch(_){
      return "å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸã€‚";
    }
  }
})();
</script>





<!-- Capacity Modal Guard v3 â€” index.html ã® </body> ç›´å‰ã«â€œè¿½è¨˜ã®ã¿â€ã§è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚æ—¢å­˜UIã¯ä¸å¤‰æ›´ -->
<style>
  /* å…¥åŠ›æ¬„ã®å¼·èª¿ï¼ˆè¶…éæ™‚ï¼‰ */
  .cmg-warn { outline: 2px solid #E60012 !important; border-radius: 10px; }

  /* ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆæ—¢å­˜ã« #infoModal ãŒã‚ã‚Œã°ãã¡ã‚‰ã‚’å„ªå…ˆåˆ©ç”¨ï¼‰ */
  .cmg-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:9999}
  .cmg-card{width:min(560px,92vw);background:#fff;border-radius:14px;box-shadow:0 18px 45px rgba(0,0,0,.35);overflow:hidden}
  .cmg-hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #eee}
  .cmg-ttl{font-weight:700;font-size:48px}
  .cmg-bd{padding:18px 16px;max-height:70vh;overflow:auto;font-size:45px;line-height:1.7;white-space:pre-wrap}
  .cmg-ft{display:flex;gap:10px;justify-content:flex-end;padding:18px 22px;border-top:1px solid #eee}
  .cmg-btn{appearance:none;border:0;border-radius:10px;padding:10px 16px;font-size:42px;cursor:pointer;background:#E60012;color:#fff}
</style>

<script>
(function(){
  // ===== ã‚ãªãŸã® index.html ã®å®Ÿä½“ã«åˆã‚ã›ãŸã‚»ãƒ¬ã‚¯ã‚¿ï¼ˆå¿…è¦ãªã‚‰ã“ã“ã ã‘èª¿æ•´ï¼‰ =====
  const CFG = {
    // é¸æŠæ¸ˆã¿ã®æ—¥ä»˜ï¼ˆä¾‹: <span id="selDate">2025-10-27</span>ï¼‰
    selDate:   '#selDate',
    // ã‚¹ãƒ­ãƒƒãƒˆä¸€è¦§ã‚³ãƒ³ãƒ†ãƒŠï¼ˆãã®ä¸­ã®ã€Œé¸æŠä¸­ãƒœã‚¿ãƒ³ã€ã‹ã‚‰æ™‚åˆ»ã¨æ®‹ã‚Šäººæ•°ã‚’æ‹¾ã†ï¼‰
    slotsWrap: '#slots',

    // äººæ•°å…¥åŠ›ï¼ˆå›ºå®šIDæƒ³å®šï¼‰
    adultSel:  '#adult',
    elemSel:   '#elem',
    kinderSel: '#kinder',
    // åˆè¨ˆæ¬„ãŒåˆ¥ã«ã‚ã‚‹ãªã‚‰ï¼ˆä»»æ„ï¼‰
    totalSel:  'input[name="totalPersons"], #totalPersons',

    // é€ä¿¡ï¼ˆäºˆç´„å†…å®¹ã‚’ç¢ºèªï¼‰
    confirmBtn: '#confirmBtn',

    // ã€Œæ®‹ã‚Šâ—¯äººã€ã®ãƒ†ã‚­ã‚¹ãƒˆãŒå…¥ã‚‹ã‚µãƒ–è¦ç´ å€™è£œï¼ˆé¸æŠä¸­ãƒœã‚¿ãƒ³ or ãã®è¦ªã®ä¸­ã‚’æ¢ã—ã¾ã™ï¼‰
    // ä¾‹: <button class="slot on" data-time="17:00"><span class="remain">æ®‹ã‚Š3äºº</span></button>
    remainSelectorsInsideSlot: ['[data-remain]', '.remain', '.remaining', '.remain-label', '.slot-remaining'],

    // é¸æŠä¸­ã‚¹ãƒ­ãƒƒãƒˆã®åˆ¤å®šã«ä½¿ã†ã‚¯ãƒ©ã‚¹/å±æ€§ï¼ˆé †ã«å„ªå…ˆï¼‰
    selectedSlotQueries: [
      '[data-selected="1"]',
      '[aria-pressed="true"]',
      '.on', '.active', '.selected'
    ],

    // DOMã‹ã‚‰æ®‹ã‚ŠãŒå–ã‚Œãªã„å ´åˆã®ä¿é™ºï¼šslots APIã§æ®‹ã‚Šäººæ•°ã‚’å–å¾—
    useSlotsApiFallback: true
  };

  // ===== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ =====
  const $  = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

  function toHHmm(s){
    if (!s) return '';
    const m = String(s).trim().match(/^(\d{1,2}):(\d{2})$/);
    return m ? `${('0'+(+m[1])).slice(-2)}:${m[2]}` : '';
  }

  function readSelectedDate(){
    const el = $(CFG.selDate);
    if (!el) return '';
    const m = (el.textContent||'').trim().match(/\b(20\d{2}-\d{2}-\d{2})\b/);
    return m ? m[1] : '';
  }

  function pickTimeFromButton(btn){
    if (!btn) return '';
    const dt = btn.getAttribute('data-time');
    if (dt) return toHHmm(dt);
    const t = (btn.textContent || '').match(/\b(\d{1,2}:\d{2})\b/);
    return t ? toHHmm(t[1]) : '';
  }

  function findSelectedSlotButton(){
    const wrap = $(CFG.slotsWrap);
    if (!wrap) return null;
    for (const q of CFG.selectedSlotQueries){
      const hit = wrap.querySelector(q);
      if (hit) return hit;
    }
    return null;
  }

  function parseRemainFromText(txt){
    if (!txt) return null;
    // ã€Œæ®‹ã‚Š3äººã€ã€Œæ®‹ã‚Š 3ã€ã€Œ3åã€ã€Œ(æ®‹ã‚Š:3)ã€ç­‰ã‚’ç·©ãã‚µãƒãƒ¼ãƒˆ
    const s = String(txt).replace(/\s/g,'');
    const m = s.match(/æ®‹ã‚Š?(\d+)äºº?|(\d+)\s*(äºº|å)/);
    const num = m ? (m[1] || m[2]) : null;
    const n = num ? parseInt(num, 10) : NaN;
    return isFinite(n) ? n : null;
  }

  function readRemainFromSlotDom(btn){
    if (!btn) return null;
    // data-remain å±æ€§ãŒã‚ã‚Œã°æœ€å„ªå…ˆ
    const dr = btn.getAttribute('data-remain');
    if (dr != null && dr !== '') {
      const n = parseInt(dr, 10);
      if (isFinite(n)) return n;
    }
    // ãƒœã‚¿ãƒ³è‡ªèº«ã‚„è¦ªã®ã‚µãƒ–è¦ç´ ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æ‹¾ã†
    const scope = btn.closest('.slot, .slot-item, .time, .row, button') || btn;
    for (const sel of CFG.remainSelectorsInsideSlot){
      const el = scope.querySelector(sel);
      if (el){
        const n = parseRemainFromText(el.textContent || el.innerText || '');
        if (n != null) return n;
      }
    }
    // ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå†…ã«ã€Œæ®‹ã‚Šâ—¯ã€ã‚’å«ã‚€å ´åˆã‚‚æ‹¾ã†
    const n2 = parseRemainFromText(btn.textContent || '');
    return n2 != null ? n2 : null;
  }

  function readPersonsTotal(){
    const val = sel => { const el = $(sel); if (!el) return 0; const n = parseInt(el.value,10); return isFinite(n) ? Math.max(0,n) : 0; };
    const a = val(CFG.adultSel), e = val(CFG.elemSel), k = val(CFG.kinderSel);
    const totalEl = $(CFG.totalSel);
    if (totalEl){
      const t = parseInt(totalEl.value,10);
      if (isFinite(t) && t > 0) return t;
    }
    return a + e + k;
  }

  function getApiBase(){ const u = new URL(location.href); return `${u.origin}${u.pathname}`; }

  async function fetchRemainFromApi(dateStr, timeStr){
    if (!CFG.useSlotsApiFallback || !dateStr || !timeStr) return null;
    try{
      const res = await fetch(`${getApiBase()}?api=slots&date=${encodeURIComponent(dateStr)}`, { headers:{'Accept':'application/json'} });
      if (!res.ok) return null;
      const j = await res.json();
      const slots = (j && j.slots) || [];
      const hit = slots.find(s => s.time === timeStr);
      return hit ? Number(hit.remain||0) : null;
    }catch(_){ return null; }
  }

  // ===== ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆæ—¢å­˜ #infoModal å„ªå…ˆã€ç„¡ã‘ã‚Œã°è»½é‡ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰ =====
  function showModal(message, title){
    const infoModal = document.getElementById('infoModal');
    if (infoModal){
      // æ—¢å­˜ infoModal ã®æ§‹é€ ã«åˆã‚ã›ã¦åŸ‹ã‚è¾¼ã‚€ï¼ˆæƒ³å®šï¼š.info-body ã¨é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã‚ã‚Šï¼‰
      const body = infoModal.querySelector('.info-body') || infoModal;
      (body).textContent = String(message||'');
      infoModal.style.display = 'flex';
      infoModal.setAttribute('aria-modal','true'); infoModal.setAttribute('role','dialog');
      // é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ãŒã‚ã‚Œã°1å›ã ã‘ãƒ¯ã‚¤ãƒ¤
      const closeBtn = infoModal.querySelector('.modal-close, .btn-close, .btn');
      if (closeBtn && !closeBtn.__cmgBound){ closeBtn.addEventListener('click', ()=>{ infoModal.style.display='none'; }, {once:true}); closeBtn.__cmgBound = true; }
      return;
    }

    // ç°¡æ˜“ãƒ¢ãƒ¼ãƒ€ãƒ«
    const root = document.createElement('div');
    root.className = 'cmg-backdrop';
    root.innerHTML = `
      <div class="cmg-card" role="dialog" aria-modal="true">
        <div class="cmg-hd"><div class="cmg-ttl">${esc(title || 'ãŠçŸ¥ã‚‰ã›')}</div></div>
        <div class="cmg-bd">${esc(message||'')}</div>
        <div class="cmg-ft"><button class="cmg-btn" id="cmgOk">OK</button></div>
      </div>`;
    const bye = ()=> root.remove();
    root.addEventListener('click', e=>{ if(e.target===root) bye(); });
    root.querySelector('#cmgOk').addEventListener('click', bye);
    document.addEventListener('keydown', function onKey(e){ if(e.key==='Escape'){ bye(); document.removeEventListener('keydown', onKey); }});
    document.body.appendChild(root);
  }
  function esc(s){ return String(s==null?'':s).replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;' }[m])); }

  // ===== æ ¸å¿ƒï¼šäººæ•°å…¥åŠ›ã®ãŸã³ã«ã€é¸æŠä¸­ã‚¹ãƒ­ãƒƒãƒˆã®æ®‹ã‚Šã¨å³æ™‚æ¯”è¼ƒ =====
  let last = { over:false, remain:null, total:null };

  async function runGuard(){
    const btn = findSelectedSlotButton();
    const timeStr = pickTimeFromButton(btn);
    const dateStr = readSelectedDate();
    const total   = readPersonsTotal();

    // å…¥åŠ›ãŒæƒã‚ãªã„/0åã®ã¨ãã¯è§£é™¤ã—ã¦çµ‚äº†
    if (!btn || !timeStr || !dateStr || total <= 0){
      setWarn(false);
      last = { over:false, remain:null, total:null };
      return true;
    }

    // DOM ã‹ã‚‰æ®‹ã‚Šäººæ•°ã‚’å„ªå…ˆã—ã¦å–å¾—
    let remain = readRemainFromSlotDom(btn);

    // å–ã‚Œãªã„å ´åˆã¯ API ã§è£œå®Œ
    if (remain == null){
      remain = await fetchRemainFromApi(dateStr, timeStr);
    }

    if (remain == null){
      // æ®‹ã‚ŠãŒåˆ†ã‹ã‚‰ãªã„å ´åˆã¯ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼ˆã‚µãƒ¼ãƒå´ã®æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãŒåƒãï¼‰
      setWarn(false);
      last = { over:false, remain:null, total };
      return true;
    }

    if (total > remain){
      // è¶…éï¼šå…¥åŠ›é€”ä¸­ã§ã‚‚å³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’1å›è¡¨ç¤ºï¼ˆåŒä¸€çŠ¶æ…‹ã§ã®é€£ç¶šè¡¨ç¤ºã¯æŠ‘åˆ¶ï¼‰
      if (!last.over || last.remain !== remain || last.total !== total){
        showModal('ç©ºãäººæ•°ã‚’è¶…ãˆã¦ã„ã‚‹ãŸã‚äºˆç´„ã§ãã¾ã›ã‚“', 'å®šå“¡ã‚ªãƒ¼ãƒãƒ¼');
      }
      setWarn(true);
      last = { over:true, remain, total };
      return false;
    }else{
      setWarn(false);
      last = { over:false, remain, total };
      return true;
    }
  }

  function setWarn(on){
    [CFG.adultSel, CFG.elemSel, CFG.kinderSel, CFG.totalSel].forEach(sel=>{
      $$(sel).forEach(el => on ? el.classList.add('cmg-warn') : el.classList.remove('cmg-warn'));
    });
    const btn = $(CFG.confirmBtn);
    if (btn){
      if (on){ btn.setAttribute('data-cmg-locked','1'); btn.disabled = true; }
      else   { btn.removeAttribute('data-cmg-locked'); btn.disabled = false; }
    }
  }

  function debounce(fn, ms){ let t; return function(){ clearTimeout(t); t=setTimeout(()=>fn.apply(this, arguments), ms); }; }

  function wire(){
    // äººæ•°å…¥åŠ›ã«ãƒ•ãƒƒã‚¯ï¼ˆé€”ä¸­ã§ã‚‚åˆ¤å®šï¼‰
    [CFG.adultSel, CFG.elemSel, CFG.kinderSel, CFG.totalSel].forEach(sel=>{
      $$(sel).forEach(el=>{
        if (!el || el.__cmgBound) return;
        el.addEventListener('input', debounce(runGuard, 100));
        el.addEventListener('change', debounce(runGuard, 50));
        el.__cmgBound = true;
      });
    });

    // ã‚¹ãƒ­ãƒƒãƒˆã®ã‚¯ãƒªãƒƒã‚¯ã§ã‚‚åˆ¤å®šï¼ˆåˆ¥æ™‚é–“ã‚’é¸ã‚“ã æ™‚ï¼‰
    const wrap = $(CFG.slotsWrap);
    if (wrap && !wrap.__cmgBound){
      wrap.addEventListener('click', debounce(runGuard, 80));
      wrap.__cmgBound = true;
    }

    // é€ä¿¡å‰ã®æœ€çµ‚ã‚¬ãƒ¼ãƒ‰
    const btn = $(CFG.confirmBtn);
    if (btn && !btn.__cmgSubmitBound){
      btn.addEventListener('click', async (ev)=>{
        const ok = await runGuard();
        if (!ok){ ev.preventDefault(); ev.stopPropagation(); }
      }, {passive:false});
      btn.__cmgSubmitBound = true;
    }
  }

  // åˆæœŸåŒ–
  document.addEventListener('DOMContentLoaded', ()=>{ wire(); runGuard(); });
  // SPAçš„ãªDOMå·®ã—æ›¿ãˆã«å‚™ãˆã¦è»½ãå†ã²ã‚‚ä»˜ã‘ï¼†å†åˆ¤å®š
  setInterval(()=>{ wire(); runGuard(); }, 1200);
})();
</script>








</body>
</html>
